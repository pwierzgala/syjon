{% extends "metacortex/base.html" %}
{% load i18n %}

{% block page_title %} {% trans "My syllabuses" %} {% endblock %}

{% block breadcrumb %}
    {{ block.super }} 
    &raquo; <a href="{% url 'metacortex:my:show' %}">Lista</a>
{% endblock %}

{% block content %}
	<h1>Sylabusy ogólne</h1>

    <form method="get">
        {{ form.year }}
        {{ form.semester }}
        {{ form.type }}
        <button class="button_2">{% trans "Filtruj" %}</button>
    </form>
    <div style="height: 15px"></div>

	{% if syllabuses %}
        <div id="s_show">
            <table class="table_0 subjects">
                <thead>
                    <tr>
                        <td class="left">Sylabus</td>
                        <td class="structure">Położenie w strukturze</td>
                        <td class="actions">{% trans "Actions" %}</td>
                        <td class="visibility">{% trans "Public" %}</td>
                    </tr>
                </thead>
                <tbody>
                    {% for s in syllabuses %}
                        {% with module=s.module %}
                            <tr>
                                <td class="left">
                                    <a class="link_preview link_0"
                                       href="{% url 'metacortex:my:show_module' syllabus_id=s.id %}"
                                    >
                                        {{ module }}
                                    </a>
                                </td>
                                <td class="structure">
                                    <table>
                                        <tr>
                                            <td class="label">Jednostka:</td>
                                            <td>{{ module.get_department }}</td>
                                        </tr>
                                        <tr>
                                            <td class="label">Kierunek:</td>
                                            <td>
                                                <a
                                                    href="{% url 'merovingian:course:details' course_id=module.get_course.id %}?archived=1"
                                                    class="link_0"
                                                >
                                                    {{ module.get_course }}
                                                </a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="label">Specjalność:</td>
                                            <td>{{ module.sgroup.name }}</td>
                                        </tr>
                                    </table>
                                </td>
                                <td class="actions">
                                    <a class="link_edit link_0"
                                       href="{% url 'metacortex:my:edit_module' syllabus_id=s.id %}"
                                    >
                                        {% trans "Edit" %}
                                    </a>
                                    <a class="link_print link_0"
                                       href="{% url 'metacortex:my:print_module' syllabus_id=s.id %}"
                                       target="_blank"
                                    >
                                        {% trans "Print" %}
                                    </a>
                                </td>
                                <td>
                                    {% if s.is_published %}
                                        <span class="link_yes"></span>
                                    {% else %}
                                        <span class="link_no"></span>
                                    {% endif %}
                                </td>
                            </tr>
                        {% endwith %}
                    {% endfor %}
                </tbody>
            </table>
            <div style="height: 15px"></div>
        </div>
	{% else %}
	   <ul class="infolist">
	       <li>Lista sylabusów jest pusta.</li>
	   </ul>
	{% endif %}
   
{% endblock %}
