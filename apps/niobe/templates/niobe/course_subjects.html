{% extends "niobe/course_modules.html" %}

{% load i18n static %}

{% block page_title %}
    {{ block.super }}
    | {% trans "Subjects" %}
{% endblock %}

{% block js %}
	<script type="text/javascript" src="{% static 'niobe/js/window_popup.js' %}"></script>
{% endblock %}

{% block breadcrumb %}
    {{ block.super }}
    &raquo; <a href="{% url 'niobe:subject-list' course.id module.id %}">{{ module }}</a>
{% endblock %}

{% block content %}
    <div id="subjects">
        <form action="" method="post">
            {% csrf_token %}
            <table class="table_0">
                <thead>
                    <tr>
                        <td></td>
                        <td>{% trans "Koordynator" %}</td>
                        {% if perms.merovingian.delete_subjecttoteacher %}
                            <td class="center delete">{% trans "Delete" %}</td>
                        {% endif %}
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="teacher-link">
                            <a class="link_0 link_edit" href="#"
                               onclick="show_window('{% url "niobe:teacher-list" %}', 'id_coordinator'); return false;"
                            >
                                {% trans "Choose" %}
                            </a>
                        </td>
                        <td>
                            {{ form.errors.coordinator }}
                            {{ form.coordinator }}
                        </td>
                        {% if perms.merovingian.delete_subjecttoteacher %}
                            <td class="center delete">
                                {{ form.errors.delete }}
                                {{ form.delete }}
                            </td>
						{% endif %}
                    </tr>
                </tbody>
            </table>
            <div class="spacer_10"></div>

            <div class="bar_0">
				<button class="button_2" type="submit" name="action" value="save">
					{% trans "Save" %}
				</button>
			</div>
        </form>
        <div class="spacer_10"></div>

        <table class="table_0">
            <thead>
            <tr>
                <td class="left subject">{% trans "Subject" %}</td>
                <td class="left semester">{% trans "Sem/Year" %}</td>
                <td class="left type">{% trans "Type" %}</td>
                <td class="left teacher">{% trans "Specialty" %}</td>
                <td class="left hours">{% trans "Number of hours" %}</td>
                <td class="left assessment">{% trans "Type of pass" %}</td>
                <td class="left teacher">{% trans "Teacher" %}</td>
                <td class="left groups">{% trans "Number of groups" %}</td>
                <td class="left hours">{% trans "Number of hours" %}</td>
            </tr>
            </thead>
            <tbody>
            {% for subject in subjects %}
            <tr class="{% cycle 'odd' 'even' %}">
                <td class="subject">
                    <a class="link_edit link_0" href="{% url 'niobe:subject-details' course.id module.id subject.subject.id %}">
                        {{ subject.subject.name|capfirst }}
                    </a>
                </td>
                <td class="semester">{{ subject.subject.semester }}</td>
                <td class="type">{{ subject.subject.type }}</td>
                <td class="sgroup">{{ subject.subject.module.sgroup.name }}</td>
                <td class="hours">{{ subject.subject.hours }}</td>
                <td class="assessment">{{ subject.subject.assessment }}</td>
                <td class="teacher">
                    <ul>
                        {% for stt in subject.subject_to_teacher %}
                        <li>{{ stt.teacher }}</li>
                        {% endfor %}
                    </ul>
                </td>
                <td class="groups">
                    <ul>
                        {% for stt in subject.subject_to_teacher %}
                        <li>{{ stt.groups }}</li>
                        {% endfor %}
                    </ul>
                </td>
                <td class="hours">
                    <ul>
                        {% for stt in subject.subject_to_teacher %}
                        <li>{{ stt.hours }}</li>
                        {% endfor %}
                    </ul>
                </td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock %}
