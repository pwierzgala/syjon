{% extends "trinity/base.html" %}

{% load i18n %}

{% block breadcrumb %}
	<a href="{% url 'merovingian:course:list' %}">{% trans "Courses" %}</a>
    &raquo; <a href="{% url 'merovingian:course:details' course.id %}">{{ course }}</a>
	&raquo; <a href="{% url 'trinity:clo:select_category' course_id=course.id %}">{%	trans "Choosing category of education" %}</a>
	&raquo; <span>Przeglądanie kierunkowych efektów uczenia się</span>
{% endblock %}

{% block content %}
	<h2>Przeglądanie kierunkowych efektów uczenia się</h2>

    <table class="table_0 no_cell_borders no_border">
        <tbody>
            <tr><td class="label">{% trans "Course" %}:</td><td>{{ course }}</td></tr>
			<tr><td class="label">Dyscyplina wiodąca:</td><td>{{ course.get_leading_discipline }}</td></tr>
            <tr><td class="label">{% trans "Education category" %}:</td><td>{{ education_category|capfirst }}</td></tr>
        </tbody>
    </table>

    <form method="post" action="{% url 'trinity:clo:delete' course_id=course.id education_category_id=education_category.id %}">
    	{% csrf_token %}

	    {# TABELA Z PRZYCISKAMI #}
	    <table class="table_0">
	        <thead>
	            <tr>
	                <td>{% trans "Actions" %}</td>
	            </tr>
	        </thead>
	        <tbody>
	            <tr>
	                <td>
						{% if is_course_admin %}
		                    <a class="link_add link_0"
							   href="{% url 'trinity:clo:add' course_id=course.id education_category_id=education_category.id %}">Dodaj kierunkowy efekt uczenia się</a>
		                    <span class="separator"> | </span>
		                    <button class="link_delete button_0" type="submit">{% trans "Delete selected" %}</button>
							<span class="separator"> | </span>
						{% endif %}
						<a class="link_print link_0" href="{% url 'trinity:clo:pdf' course_id=course.id %}" target="_blank">{% trans "Print" %}</a>
	                </td>
	            </tr>
	        </tbody>
	    </table>
		<div class="spacer_5"></div>
	
	    <div id="ee_show">
	    	{% if clos %}
	    		<table class="table_0 row_highlight">
	    			<thead>
	    				<tr>
	    					{% if is_course_admin %}
	    						<td class="delete"></td>
	    					{% endif %}
	    					<td class="symbol">{% trans "Symbol" %}</td>
	    					<td class="description left">{% trans "Description" %}</td>
							<td class="alo">Charakterystyki drugiego stopnia PRK</td>
	    					<td class="module">Przedmioty</td>
	    				</tr>
	    			</thead>
	    			<tbody>
	    				{% for clo in clos %}
		    				<tr class="{% cycle 'odd' 'even' %}">
		    					{% if is_course_admin %}
			    					<td class="delete">
			    						<input type="checkbox" value="{{ clo.id }}" name="selected_id" />
			    					</td>
			    				{% endif %}
		    					<td class="symbol">
		    						{% if is_course_admin %}
		    							<a class="link_edit link_0" href="{% url 'trinity:clo:update' course_id=course.id education_category_id=education_category.id clo_id=clo.id %}">{{ clo.symbol }}</a>
		    						{% else %}
		    							<span>{{ clo.symbol }}</span>
		    						{% endif %}
		    					</td>
		    					<td class="description">
		    						{{ clo.description|linebreaksbr }}
		    					</td>
								<td class="alo">
									<ul class="alos_list">
										{% for loc in clo.locs.all %}
											<li>
												<a href="" class="tip" title="{{ loc.description }}">
													{{ loc }}
												</a>
											</li>
										{% endfor %}
									</ul>
								</td>
		    					<td class="module">
		    						<ul class="modules_list">
		    							{% for module in clo.get_related_modules %}
		    								<li>
		    									<a class="link_0" href="{% url 'trinity:mlo:show' course.id module.sgroup.id module.id %}" target="_blank">{{ module }}</a>
												({{ module.intensity }})
		    								</li>
		    							{% endfor %}
		    						</ul>
		    					</td>
		    				</tr>
	    	        	{% endfor %}
	    			</tbody>
	    		</table>
	    		<div class="spacer_5"></div>
	    	{% else %}
				<ul class="infolist">
	    			<li>Lista efektów uczenia się jest pusta</li>
	    		</ul>
	    	{% endif %}
		</div>
	</form>

    {% if is_course_admin %}
		{% if remaining_locs %}
			<table class="table_0">
				<thead>
					<tr>
						<td>Lista efektów uczenia się jest pusta</td>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>
						{% for remaining_loc in remaining_locs %}
							<a href='' class='tip' title='{{ remaining_loc.description }}'>{{ remaining_loc.symbol }}</a>{% if not forloop.last %}, {% endif %}
						{% endfor %}
						</td>
					</tr>
				</tbody>
			</table>
		{% else %}
			<div class="messages">
				<ul class="success">
					<li>
						Wszystkie charakterystyki efektów uczenia się zostały użyte
					</li>
				</ul>
			</div>
		{% endif %}
		<div class="spacer_5"></div>
	{% endif %}

{% endblock %}